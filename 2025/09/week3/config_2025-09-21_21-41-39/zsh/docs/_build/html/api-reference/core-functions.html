

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Core Functions API Reference &mdash; Siege Analytics ZSH Configuration System 2.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=a274b600" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://docs.siegeanalytics.comapi-reference/core-functions.html"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=20623aea"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=d3ce34c2"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #00FF41" >

          
          
          <a href="../index.html" class="icon icon-home">
            Siege Analytics ZSH Configuration System
              <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/installation.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/quick-start.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/configuration.html">Configuration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/troubleshooting.html">Troubleshooting Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Core Systems</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../core-systems/python-management.html">Python Management System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-systems/help-system.html">Help System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-systems/performance-optimization.html">Performance Optimization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Big Data Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../big-data/spark-system.html">Apache Spark Integration System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../big-data/hadoop-integration.html">Hadoop Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../big-data/yarn-management.html">YARN Management</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #00FF41" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Siege Analytics ZSH Configuration System</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Core Functions API Reference</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api-reference/core-functions.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="core-functions-api-reference">
<h1>Core Functions API Reference<a class="headerlink" href="#core-functions-api-reference" title="Link to this heading"></a></h1>
<p>This section documents all core functions with their definitions, usage examples, and corresponding unit tests.</p>
<nav class="contents local" id="functions-in-this-module">
<p class="topic-title">Functions in this module</p>
<ul class="simple">
<li><p><a class="reference internal" href="#essential-shell-utilities" id="id1">Essential Shell Utilities</a></p>
<ul>
<li><p><a class="reference internal" href="#command-exists" id="id2">command_exists()</a></p></li>
<li><p><a class="reference internal" href="#mkcd" id="id3">mkcd()</a></p></li>
<li><p><a class="reference internal" href="#is-online" id="id4">is_online()</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#python-environment-management" id="id5">Python Environment Management</a></p>
<ul>
<li><p><a class="reference internal" href="#py-env-switch" id="id6">py_env_switch()</a></p></li>
<li><p><a class="reference internal" href="#ds-project-init" id="id7">ds_project_init()</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#cross-platform-utilities" id="id8">Cross-Platform Utilities</a></p>
<ul>
<li><p><a class="reference internal" href="#path-add" id="id9">path_add()</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#notes" id="id10">Notes</a></p></li>
</ul>
</nav>
<section id="essential-shell-utilities">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Essential Shell Utilities</a><a class="headerlink" href="#essential-shell-utilities" title="Link to this heading"></a></h2>
<section id="command-exists">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">command_exists()</a><a class="headerlink" href="#command-exists" title="Link to this heading"></a></h3>
<p><strong>Function Definition:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>command_exists<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="c1"># Check if a command exists in the system</span>
<span class="w">    </span><span class="c1">#</span>
<span class="w">    </span><span class="c1"># Args:</span>
<span class="w">    </span><span class="c1">#     command (str): Name of command to check</span>
<span class="w">    </span><span class="c1">#</span>
<span class="w">    </span><span class="c1"># Returns:</span>
<span class="w">    </span><span class="c1">#     0: Command exists</span>
<span class="w">    </span><span class="c1">#     1: Command not found</span>
<span class="w">    </span><span class="nb">command</span><span class="w"> </span>-v<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="w"> </span>&gt;/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="o">}</span>
</pre></div>
</div>
<p><strong>Examples and Elaboration:</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">command_exists</span></code> function is a fundamental utility that safely checks for command availability without generating error output. This is essential for conditional loading of modules and graceful degradation.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Basic usage - check if a command exists</span>
<span class="k">if</span><span class="w"> </span>command_exists<span class="w"> </span><span class="s2">&quot;docker&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Docker is available&quot;</span>
<span class="w">    </span>load_docker_module
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Docker not found - skipping Docker integration&quot;</span>
<span class="k">fi</span>

<span class="c1"># Use in conditional statements</span>
command_exists<span class="w"> </span><span class="s2">&quot;python&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Python found&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Python missing&quot;</span>

<span class="c1"># Check multiple commands</span>
<span class="k">for</span><span class="w"> </span>cmd<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="w"> </span><span class="s2">&quot;python&quot;</span><span class="w"> </span><span class="s2">&quot;node&quot;</span><span class="w"> </span><span class="s2">&quot;java&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span>command_exists<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$cmd</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;✅ </span><span class="nv">$cmd</span><span class="s2">: Available&quot;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;❌ </span><span class="nv">$cmd</span><span class="s2">: Missing&quot;</span>
<span class="w">    </span><span class="k">fi</span>
<span class="k">done</span>

<span class="c1"># Use in function definitions for robust error handling</span>
setup_development_env<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">required_commands</span><span class="o">=(</span><span class="s2">&quot;git&quot;</span><span class="w"> </span><span class="s2">&quot;python&quot;</span><span class="w"> </span><span class="s2">&quot;node&quot;</span><span class="o">)</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span>cmd<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">required_commands</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span>!<span class="w"> </span>command_exists<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$cmd</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Error: Required command &#39;</span><span class="nv">$cmd</span><span class="s2">&#39; not found&quot;</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">        </span><span class="k">fi</span>
<span class="w">    </span><span class="k">done</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;All required commands available&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p><strong>Unit Tests:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Test: command_exists with existing command</span>
test_command_exists_with_existing_command<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="c1"># Should return 0 for commands that exist</span>
<span class="w">    </span>command_exists<span class="w"> </span><span class="s2">&quot;bash&quot;</span>
<span class="w">    </span>assert_equals<span class="w"> </span><span class="nv">$?</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="s2">&quot;command_exists should return 0 for existing commands&quot;</span>
<span class="o">}</span>

<span class="c1"># Test: command_exists with non-existing command</span>
test_command_exists_with_missing_command<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="c1"># Should return 1 for commands that don&#39;t exist</span>
<span class="w">    </span>command_exists<span class="w"> </span><span class="s2">&quot;nonexistent_command_12345&quot;</span>
<span class="w">    </span>assert_equals<span class="w"> </span><span class="nv">$?</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s2">&quot;command_exists should return 1 for missing commands&quot;</span>
<span class="o">}</span>

<span class="c1"># Test: command_exists with empty input</span>
test_command_exists_with_empty_input<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span>command_exists<span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">    </span>assert_equals<span class="w"> </span><span class="nv">$?</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s2">&quot;command_exists should return 1 for empty input&quot;</span>
<span class="o">}</span>

<span class="c1"># Test: command_exists produces no output</span>
test_command_exists_silent_operation<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">output</span><span class="o">=</span><span class="k">$(</span>command_exists<span class="w"> </span><span class="s2">&quot;nonexistent_command&quot;</span><span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="k">)</span>
<span class="w">    </span>assert_equals<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$output</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="s2">&quot;command_exists should produce no output&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
</section>
<section id="mkcd">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">mkcd()</a><a class="headerlink" href="#mkcd" title="Link to this heading"></a></h3>
<p><strong>Function Definition:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkcd<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="c1"># Create directory and change into it</span>
<span class="w">    </span><span class="c1">#</span>
<span class="w">    </span><span class="c1"># Args:</span>
<span class="w">    </span><span class="c1">#     directory_path (str): Path to directory to create</span>
<span class="w">    </span><span class="c1">#</span>
<span class="w">    </span><span class="c1"># Returns:</span>
<span class="w">    </span><span class="c1">#     0: Success</span>
<span class="w">    </span><span class="c1">#     1: Failed to create or enter directory</span>
<span class="w">    </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p><strong>Examples and Elaboration:</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">mkcd</span></code> function combines the common pattern of creating a directory and immediately entering it. The <code class="docutils literal notranslate"><span class="pre">-p</span></code> flag ensures parent directories are created as needed, and the <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> ensures we only change directories if creation succeeds.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Basic usage - create and enter directory</span>
mkcd<span class="w"> </span><span class="s2">&quot;new_project&quot;</span>
<span class="c1"># Creates &#39;new_project&#39; directory and changes into it</span>

<span class="c1"># Create nested directories</span>
mkcd<span class="w"> </span><span class="s2">&quot;projects/data_science/experiment_1&quot;</span>
<span class="c1"># Creates full path: projects/data_science/experiment_1</span>

<span class="c1"># Use in project setup workflows</span>
setup_project<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">project_name</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="w">    </span>mkcd<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$project_name</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Failed to create project directory: </span><span class="nv">$project_name</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span><span class="c1"># Create project structure</span>
<span class="w">    </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="o">{</span>src,tests,docs,data<span class="o">}</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Project </span><span class="nv">$project_name</span><span class="s2"> created successfully&quot;</span>
<span class="o">}</span>

<span class="c1"># Temporary directory creation</span>
create_temp_workspace<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">temp_dir</span><span class="o">=</span><span class="s2">&quot;/tmp/workspace_</span><span class="k">$(</span>date<span class="w"> </span>+%s<span class="k">)</span><span class="s2">&quot;</span>
<span class="w">    </span>mkcd<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$temp_dir</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Working in temporary directory: </span><span class="nv">$PWD</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Error handling example</span>
mkcd<span class="w"> </span><span class="s2">&quot;/root/restricted&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Cannot create directory in restricted location&quot;</span>
<span class="w">    </span>mkcd<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/alternative_location&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p><strong>Unit Tests:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Test: mkcd creates and enters directory</span>
test_mkcd_creates_and_enters_directory<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">test_dir</span><span class="o">=</span><span class="s2">&quot;/tmp/test_mkcd_</span><span class="nv">$$</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="c1"># Ensure clean state</span>
<span class="w">    </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_dir</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="c1"># Test mkcd</span>
<span class="w">    </span>mkcd<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_dir</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="c1"># Verify directory was created and we&#39;re in it</span>
<span class="w">    </span>assert_equals<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$PWD</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_dir</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;Should be in created directory&quot;</span>
<span class="w">    </span>assert_true<span class="w"> </span><span class="s2">&quot;[ -d &#39;</span><span class="nv">$test_dir</span><span class="s2">&#39; ]&quot;</span><span class="w"> </span><span class="s2">&quot;Directory should exist&quot;</span>

<span class="w">    </span><span class="c1"># Cleanup</span>
<span class="w">    </span><span class="nb">cd</span><span class="w"> </span>/tmp<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_dir</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Test: mkcd creates nested directories</span>
test_mkcd_creates_nested_directories<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">test_dir</span><span class="o">=</span><span class="s2">&quot;/tmp/test/nested/path_</span><span class="nv">$$</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="c1"># Ensure clean state</span>
<span class="w">    </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="s2">&quot;/tmp/test&quot;</span>

<span class="w">    </span>mkcd<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_dir</span><span class="s2">&quot;</span>

<span class="w">    </span>assert_equals<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$PWD</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_dir</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;Should be in nested directory&quot;</span>
<span class="w">    </span>assert_true<span class="w"> </span><span class="s2">&quot;[ -d &#39;</span><span class="nv">$test_dir</span><span class="s2">&#39; ]&quot;</span><span class="w"> </span><span class="s2">&quot;Nested directory should exist&quot;</span>

<span class="w">    </span><span class="c1"># Cleanup</span>
<span class="w">    </span><span class="nb">cd</span><span class="w"> </span>/tmp<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="s2">&quot;/tmp/test&quot;</span>
<span class="o">}</span>

<span class="c1"># Test: mkcd handles existing directory</span>
test_mkcd_handles_existing_directory<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">test_dir</span><span class="o">=</span><span class="s2">&quot;/tmp/existing_test_</span><span class="nv">$$</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="c1"># Create directory first</span>
<span class="w">    </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_dir</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="c1"># Test mkcd on existing directory</span>
<span class="w">    </span>mkcd<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_dir</span><span class="s2">&quot;</span>

<span class="w">    </span>assert_equals<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$PWD</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_dir</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;Should enter existing directory&quot;</span>

<span class="w">    </span><span class="c1"># Cleanup</span>
<span class="w">    </span><span class="nb">cd</span><span class="w"> </span>/tmp<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_dir</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Test: mkcd fails gracefully on permission denied</span>
test_mkcd_fails_gracefully<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="c1"># Test with restricted location (if not root)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$EUID</span><span class="w"> </span>-ne<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span>mkcd<span class="w"> </span><span class="s2">&quot;/root/restricted_test&quot;</span>
<span class="w">        </span>assert_not_equals<span class="w"> </span><span class="nv">$?</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="s2">&quot;Should fail on permission denied&quot;</span>
<span class="w">        </span>assert_not_equals<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$PWD</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;/root/restricted_test&quot;</span><span class="w"> </span><span class="s2">&quot;Should not change to restricted directory&quot;</span>
<span class="w">    </span><span class="k">fi</span>
<span class="o">}</span>
</pre></div>
</div>
</section>
<section id="is-online">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">is_online()</a><a class="headerlink" href="#is-online" title="Link to this heading"></a></h3>
<p><strong>Function Definition:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>is_online<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="c1"># Check if internet connectivity is available</span>
<span class="w">    </span><span class="c1">#</span>
<span class="w">    </span><span class="c1"># Args:</span>
<span class="w">    </span><span class="c1">#     None</span>
<span class="w">    </span><span class="c1">#</span>
<span class="w">    </span><span class="c1"># Returns:</span>
<span class="w">    </span><span class="c1">#     0: Online (internet accessible)</span>
<span class="w">    </span><span class="c1">#     1: Offline (no internet connection)</span>
<span class="w">    </span>ping<span class="w"> </span>-c<span class="w"> </span><span class="m">1</span><span class="w"> </span>google.com<span class="w"> </span>&gt;/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="o">}</span>
</pre></div>
</div>
<p><strong>Examples and Elaboration:</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">is_online</span></code> function provides a simple way to check internet connectivity before attempting network operations. It uses a single ping to Google’s DNS servers, which is fast and reliable.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Basic connectivity check</span>
<span class="k">if</span><span class="w"> </span>is_online<span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Internet connection available&quot;</span>
<span class="w">    </span><span class="c1"># Proceed with network operations</span>
<span class="w">    </span>update_packages
<span class="w">    </span>download_dependencies
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;No internet connection - working offline&quot;</span>
<span class="w">    </span>use_cached_data
<span class="k">fi</span>

<span class="c1"># Use in deployment scripts</span>
deploy_application<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span>!<span class="w"> </span>is_online<span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Error: Internet connection required for deployment&quot;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Downloading latest dependencies...&quot;</span>
<span class="w">    </span>npm<span class="w"> </span>install
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Deploying to production...&quot;</span>
<span class="o">}</span>

<span class="c1"># Conditional package installation</span>
install_optional_packages<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">packages</span><span class="o">=(</span><span class="s2">&quot;docker&quot;</span><span class="w"> </span><span class="s2">&quot;kubernetes-cli&quot;</span><span class="w"> </span><span class="s2">&quot;terraform&quot;</span><span class="o">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span>is_online<span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span>package<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">packages</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Installing </span><span class="nv">$package</span><span class="s2">...&quot;</span>
<span class="w">            </span>brew<span class="w"> </span>install<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$package</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="k">done</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Offline - skipping optional package installation&quot;</span>
<span class="w">    </span><span class="k">fi</span>
<span class="o">}</span>

<span class="c1"># Network-dependent configuration</span>
configure_development_env<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span>is_online<span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Configuring for online development&quot;</span>
<span class="w">        </span><span class="nb">export</span><span class="w"> </span><span class="nv">API_ENDPOINT</span><span class="o">=</span><span class="s2">&quot;https://api.production.com&quot;</span>
<span class="w">        </span>download_latest_schema
<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Configuring for offline development&quot;</span>
<span class="w">        </span><span class="nb">export</span><span class="w"> </span><span class="nv">API_ENDPOINT</span><span class="o">=</span><span class="s2">&quot;http://localhost:3000&quot;</span>
<span class="w">        </span>use_local_schema
<span class="w">    </span><span class="k">fi</span>
<span class="o">}</span>
</pre></div>
</div>
<p><strong>Unit Tests:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Test: is_online basic functionality</span>
test_is_online_basic_functionality<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="c1"># This test assumes network connectivity during testing</span>
<span class="w">    </span><span class="c1"># In a real environment, you might mock the network call</span>

<span class="w">    </span><span class="nb">local</span><span class="w"> </span>result
<span class="w">    </span>is_online
<span class="w">    </span><span class="nv">result</span><span class="o">=</span><span class="nv">$?</span>

<span class="w">    </span><span class="c1"># Should return either 0 (online) or 1 (offline)</span>
<span class="w">    </span>assert_true<span class="w"> </span><span class="s2">&quot;(( result == 0 || result == 1 ))&quot;</span><span class="w"> </span><span class="s2">&quot;Should return valid exit code&quot;</span>
<span class="o">}</span>

<span class="c1"># Test: is_online produces no output</span>
test_is_online_silent_operation<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span>output
<span class="w">    </span><span class="nv">output</span><span class="o">=</span><span class="k">$(</span>is_online<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="k">)</span>

<span class="w">    </span>assert_equals<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$output</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="s2">&quot;is_online should produce no output&quot;</span>
<span class="o">}</span>

<span class="c1"># Mock test: is_online when network is available</span>
test_is_online_with_network_mock<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="c1"># Override ping command for testing</span>
<span class="w">    </span>ping<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="c1"># Mock successful ping</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span>is_online
<span class="w">    </span>assert_equals<span class="w"> </span><span class="nv">$?</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="s2">&quot;Should return 0 when network is available&quot;</span>

<span class="w">    </span><span class="c1"># Restore original ping</span>
<span class="w">    </span><span class="nb">unset</span><span class="w"> </span>-f<span class="w"> </span>ping
<span class="o">}</span>

<span class="c1"># Mock test: is_online when network is unavailable</span>
test_is_online_without_network_mock<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="c1"># Override ping command for testing</span>
<span class="w">    </span>ping<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="c1"># Mock failed ping</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span>is_online
<span class="w">    </span>assert_equals<span class="w"> </span><span class="nv">$?</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s2">&quot;Should return 1 when network is unavailable&quot;</span>

<span class="w">    </span><span class="c1"># Restore original ping</span>
<span class="w">    </span><span class="nb">unset</span><span class="w"> </span>-f<span class="w"> </span>ping
<span class="o">}</span>

<span class="c1"># Performance test: is_online responds quickly</span>
test_is_online_performance<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span>start_time<span class="w"> </span>end_time<span class="w"> </span>duration
<span class="w">    </span><span class="nv">start_time</span><span class="o">=</span><span class="k">$(</span>date<span class="w"> </span>+%s<span class="k">)</span>

<span class="w">    </span>is_online

<span class="w">    </span><span class="nv">end_time</span><span class="o">=</span><span class="k">$(</span>date<span class="w"> </span>+%s<span class="k">)</span>
<span class="w">    </span><span class="nv">duration</span><span class="o">=</span><span class="k">$((</span><span class="nv">end_time</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">start_time</span><span class="k">))</span>

<span class="w">    </span><span class="c1"># Should complete within 5 seconds</span>
<span class="w">    </span>assert_true<span class="w"> </span><span class="s2">&quot;(( duration &lt;= 5 ))&quot;</span><span class="w"> </span><span class="s2">&quot;is_online should complete within 5 seconds&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
</section>
</section>
<section id="python-environment-management">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Python Environment Management</a><a class="headerlink" href="#python-environment-management" title="Link to this heading"></a></h2>
<section id="py-env-switch">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">py_env_switch()</a><a class="headerlink" href="#py-env-switch" title="Link to this heading"></a></h3>
<p><strong>Function Definition:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>py_env_switch<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="c1"># Quick switch between Python environments (cross-shell compatible)</span>
<span class="w">    </span><span class="c1">#</span>
<span class="w">    </span><span class="c1"># Usage:</span>
<span class="w">    </span><span class="c1">#   py_env_switch list           # List all environments</span>
<span class="w">    </span><span class="c1">#   py_env_switch myenv          # Switch to pyenv environment</span>
<span class="w">    </span><span class="c1">#   py_env_switch uv             # Use UV in current directory</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">target</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">list</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$target</span><span class="s2">&quot;</span><span class="w"> </span><span class="k">in</span>
<span class="w">        </span><span class="s2">&quot;list&quot;</span><span class="p">|</span><span class="s2">&quot;-l&quot;</span><span class="p">|</span><span class="s2">&quot;--list&quot;</span><span class="o">)</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;🐍 Available Python Environments:&quot;</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;📦 Pyenv Environments:&quot;</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span>command_exists<span class="w"> </span>pyenv<span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">                </span>pyenv<span class="w"> </span>versions<span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span><span class="s1">&#39;s/^/  /&#39;</span>
<span class="w">            </span><span class="k">else</span>
<span class="w">                </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;  ❌ Pyenv not installed&quot;</span>
<span class="w">            </span><span class="k">fi</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;⚡ UV Projects:&quot;</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;pyproject.toml&quot;</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">                </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;  ✅ Current directory has UV project&quot;</span>
<span class="w">            </span><span class="k">else</span>
<span class="w">                </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;  ❌ No UV project in current directory&quot;</span>
<span class="w">            </span><span class="k">fi</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Usage:&quot;</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;  py_env_switch &lt;env_name&gt;    # Switch to pyenv environment&quot;</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;  py_env_switch uv            # Activate UV project here&quot;</span>
<span class="w">            </span><span class="p">;;</span>
<span class="w">        </span><span class="s2">&quot;uv&quot;</span><span class="o">)</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;pyproject.toml&quot;</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;.venv&quot;</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">                    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;⚡ Activating UV project: </span><span class="k">$(</span>basename<span class="w"> </span><span class="nv">$PWD</span><span class="k">)</span><span class="s2">&quot;</span>
<span class="w">                    </span><span class="nb">source</span><span class="w"> </span>.venv/bin/activate
<span class="w">                </span><span class="k">else</span>
<span class="w">                    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;🔨 Setting up UV project...&quot;</span>
<span class="w">                    </span>uv<span class="w"> </span>sync<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">source</span><span class="w"> </span>.venv/bin/activate
<span class="w">                </span><span class="k">fi</span>
<span class="w">            </span><span class="k">else</span>
<span class="w">                </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;❌ No pyproject.toml found. Run &#39;uv init&#39; to create a UV project.&quot;</span>
<span class="w">            </span><span class="k">fi</span>
<span class="w">            </span><span class="p">;;</span>
<span class="w">        </span>*<span class="o">)</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span>command_exists<span class="w"> </span>pyenv<span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">                </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;🐍 Switching to pyenv environment: </span><span class="nv">$target</span><span class="s2">&quot;</span>
<span class="w">                </span>pyenv<span class="w"> </span>activate<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$target</span><span class="s2">&quot;</span><span class="w"> </span><span class="m">2</span>&gt;/dev/null<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">{</span>
<span class="w">                    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;❌ Environment &#39;</span><span class="nv">$target</span><span class="s2">&#39; not found. Available:&quot;</span>
<span class="w">                    </span>pyenv<span class="w"> </span>versions
<span class="w">                </span><span class="o">}</span>
<span class="w">            </span><span class="k">else</span>
<span class="w">                </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;❌ Pyenv not available&quot;</span>
<span class="w">            </span><span class="k">fi</span>
<span class="w">            </span><span class="p">;;</span>
<span class="w">    </span><span class="k">esac</span>
<span class="o">}</span>
</pre></div>
</div>
<p><strong>Examples and Elaboration:</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">py_env_switch</span></code> function provides unified Python environment management across pyenv and UV, supporting both development workflows seamlessly.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># List all available environments</span>
py_env_switch<span class="w"> </span>list
<span class="c1"># Shows both pyenv environments and UV projects</span>

<span class="c1"># Switch to a specific pyenv environment</span>
py_env_switch<span class="w"> </span>data_science
<span class="c1"># Activates the &#39;data_science&#39; pyenv environment</span>

<span class="c1"># Activate UV project in current directory</span>
<span class="nb">cd</span><span class="w"> </span>my_uv_project
py_env_switch<span class="w"> </span>uv
<span class="c1"># Sets up and activates UV virtual environment</span>

<span class="c1"># Use in project setup scripts</span>
setup_data_science_project<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">project_name</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">env_type</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">2</span><span class="k">:-</span><span class="nv">uv</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="w">    </span>mkcd<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$project_name</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$env_type</span><span class="s2">&quot;</span><span class="w"> </span><span class="k">in</span>
<span class="w">        </span><span class="s2">&quot;uv&quot;</span><span class="o">)</span>
<span class="w">            </span>uv<span class="w"> </span>init<span class="w"> </span>--name<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$project_name</span><span class="s2">&quot;</span><span class="w"> </span>--python<span class="w"> </span><span class="m">3</span>.11
<span class="w">            </span>uv<span class="w"> </span>add<span class="w"> </span>pandas<span class="w"> </span>numpy<span class="w"> </span>matplotlib<span class="w"> </span>jupyter
<span class="w">            </span>py_env_switch<span class="w"> </span>uv
<span class="w">            </span><span class="p">;;</span>
<span class="w">        </span><span class="s2">&quot;pyenv&quot;</span><span class="o">)</span>
<span class="w">            </span>py_env_switch<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$project_name</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">{</span>
<span class="w">                </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Creating new pyenv environment...&quot;</span>
<span class="w">                </span>pyenv<span class="w"> </span>virtualenv<span class="w"> </span><span class="m">3</span>.11<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$project_name</span><span class="s2">&quot;</span>
<span class="w">                </span>py_env_switch<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$project_name</span><span class="s2">&quot;</span>
<span class="w">            </span><span class="o">}</span>
<span class="w">            </span><span class="p">;;</span>
<span class="w">    </span><span class="k">esac</span>
<span class="o">}</span>

<span class="c1"># Environment-specific workflows</span>
analyze_with_spark<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span>py_env_switch<span class="w"> </span>spark_env
<span class="w">    </span>smart_spark_submit<span class="w"> </span>analysis.py
<span class="o">}</span>

analyze_with_uv<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span>py_env_switch<span class="w"> </span>uv
<span class="w">    </span>uv<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>analysis.py
<span class="o">}</span>
</pre></div>
</div>
<p><strong>Unit Tests:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Test: py_env_switch list command</span>
test_py_env_switch_list<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span>output
<span class="w">    </span><span class="nv">output</span><span class="o">=</span><span class="k">$(</span>py_env_switch<span class="w"> </span>list<span class="k">)</span>

<span class="w">    </span>assert_contains<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$output</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;Available Python Environments&quot;</span><span class="w"> </span><span class="s2">&quot;Should show environment list&quot;</span>
<span class="w">    </span>assert_contains<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$output</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;Pyenv Environments&quot;</span><span class="w"> </span><span class="s2">&quot;Should show pyenv section&quot;</span>
<span class="w">    </span>assert_contains<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$output</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;UV Projects&quot;</span><span class="w"> </span><span class="s2">&quot;Should show UV section&quot;</span>
<span class="o">}</span>

<span class="c1"># Test: py_env_switch with UV project</span>
test_py_env_switch_uv_project<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">test_dir</span><span class="o">=</span><span class="s2">&quot;/tmp/test_uv_project_</span><span class="nv">$$</span><span class="s2">&quot;</span>
<span class="w">    </span>mkcd<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_dir</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="c1"># Create UV project</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;[project]&#39;</span><span class="w"> </span>&gt;<span class="w"> </span>pyproject.toml
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;name = &quot;test-project&quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>pyproject.toml
<span class="w">    </span>mkdir<span class="w"> </span>-p<span class="w"> </span>.venv/bin
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;#!/bin/bash&#39;</span><span class="w"> </span>&gt;<span class="w"> </span>.venv/bin/activate
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;export VIRTUAL_ENV=&quot;&#39;</span><span class="nv">$test_dir</span><span class="s1">&#39;/.venv&quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>.venv/bin/activate
<span class="w">    </span>chmod<span class="w"> </span>+x<span class="w"> </span>.venv/bin/activate

<span class="w">    </span>py_env_switch<span class="w"> </span>uv

<span class="w">    </span>assert_equals<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$VIRTUAL_ENV</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_dir</span><span class="s2">/.venv&quot;</span><span class="w"> </span><span class="s2">&quot;Should activate UV environment&quot;</span>

<span class="w">    </span><span class="c1"># Cleanup</span>
<span class="w">    </span><span class="nb">cd</span><span class="w"> </span>/tmp<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_dir</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Test: py_env_switch without UV project</span>
test_py_env_switch_no_uv_project<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">test_dir</span><span class="o">=</span><span class="s2">&quot;/tmp/test_no_uv_</span><span class="nv">$$</span><span class="s2">&quot;</span>
<span class="w">    </span>mkcd<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_dir</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="nb">local</span><span class="w"> </span>output
<span class="w">    </span><span class="nv">output</span><span class="o">=</span><span class="k">$(</span>py_env_switch<span class="w"> </span>uv<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="k">)</span>

<span class="w">    </span>assert_contains<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$output</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;No pyproject.toml found&quot;</span><span class="w"> </span><span class="s2">&quot;Should detect missing UV project&quot;</span>

<span class="w">    </span><span class="c1"># Cleanup</span>
<span class="w">    </span><span class="nb">cd</span><span class="w"> </span>/tmp<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_dir</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Test: py_env_switch pyenv integration</span>
test_py_env_switch_pyenv<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span>!<span class="w"> </span>command_exists<span class="w"> </span>pyenv<span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span>skip_test<span class="w"> </span><span class="s2">&quot;Pyenv not available&quot;</span>
<span class="w">        </span><span class="k">return</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="c1"># Test with existing environment (if any)</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">envs</span><span class="o">=</span><span class="k">$(</span>pyenv<span class="w"> </span>versions<span class="w"> </span>--bare<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n1<span class="k">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$envs</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">local</span><span class="w"> </span><span class="nv">first_env</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$envs</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n1<span class="k">)</span>
<span class="w">        </span>py_env_switch<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$first_env</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="c1"># Note: Full testing would require mock pyenv</span>
<span class="w">    </span><span class="k">fi</span>
<span class="o">}</span>
</pre></div>
</div>
</section>
<section id="ds-project-init">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">ds_project_init()</a><a class="headerlink" href="#ds-project-init" title="Link to this heading"></a></h3>
<p><strong>Function Definition:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ds_project_init<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="c1"># Initialize a data science project with UV</span>
<span class="w">    </span><span class="c1">#</span>
<span class="w">    </span><span class="c1"># Usage:</span>
<span class="w">    </span><span class="c1">#   ds_project_init myproject        # Basic data science project</span>
<span class="w">    </span><span class="c1">#   ds_project_init myproject spark  # With Spark dependencies</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">project_name</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">project_type</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">2</span><span class="k">:-</span><span class="nv">basic</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$project_name</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Usage: ds_project_init &lt;project_name&gt; [basic|spark|geo]&quot;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;🔬 Creating data science project: </span><span class="nv">$project_name</span><span class="s2">&quot;</span>
<span class="w">    </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$project_name</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$project_name</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="c1"># Initialize UV project</span>
<span class="w">    </span>uv<span class="w"> </span>init<span class="w"> </span>--name<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$project_name</span><span class="s2">&quot;</span><span class="w"> </span>--python<span class="w"> </span><span class="m">3</span>.11

<span class="w">    </span><span class="c1"># Add common data science dependencies</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;📦 Adding data science dependencies...&quot;</span>
<span class="w">    </span>uv<span class="w"> </span>add<span class="w"> </span>pandas<span class="w"> </span>numpy<span class="w"> </span>matplotlib<span class="w"> </span>seaborn<span class="w"> </span>jupyter<span class="w"> </span>ipykernel

<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$project_type</span><span class="s2">&quot;</span><span class="w"> </span><span class="k">in</span>
<span class="w">        </span><span class="s2">&quot;spark&quot;</span><span class="o">)</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;⚡ Adding Spark dependencies...&quot;</span>
<span class="w">            </span>uv<span class="w"> </span>add<span class="w"> </span>pyspark<span class="w"> </span>findspark
<span class="w">            </span><span class="p">;;</span>
<span class="w">        </span><span class="s2">&quot;geo&quot;</span><span class="o">)</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;🌍 Adding geospatial dependencies...&quot;</span>
<span class="w">            </span>uv<span class="w"> </span>add<span class="w"> </span>geopandas<span class="w"> </span>folium<span class="w"> </span>contextily
<span class="w">            </span><span class="p">;;</span>
<span class="w">    </span><span class="k">esac</span>

<span class="w">    </span><span class="c1"># Create project structure</span>
<span class="w">    </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="o">{</span>notebooks,data/<span class="o">{</span>raw,processed<span class="o">}</span>,src,tests<span class="o">}</span>

<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;✅ Data science project &#39;</span><span class="nv">$project_name</span><span class="s2">&#39; created!&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;🚀 Next steps:&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;  source .venv/bin/activate&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;  jupyter lab&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p><strong>Examples and Elaboration:</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">ds_project_init</span></code> function creates a complete data science project structure with appropriate dependencies based on the project type.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create basic data science project</span>
ds_project_init<span class="w"> </span><span class="s2">&quot;sales_analysis&quot;</span>
<span class="c1"># Creates project with pandas, numpy, matplotlib, jupyter</span>

<span class="c1"># Create Spark-enabled data science project</span>
ds_project_init<span class="w"> </span><span class="s2">&quot;big_data_analysis&quot;</span><span class="w"> </span>spark
<span class="c1"># Adds PySpark and Findspark for distributed computing</span>

<span class="c1"># Create geospatial analysis project</span>
ds_project_init<span class="w"> </span><span class="s2">&quot;location_analysis&quot;</span><span class="w"> </span>geo
<span class="c1"># Adds GeoPandas, Folium, Contextily for mapping</span>

<span class="c1"># Use in automated workflows</span>
create_monthly_analysis<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">month</span><span class="o">=</span><span class="k">$(</span>date<span class="w"> </span>+%Y-%m<span class="k">)</span>
<span class="w">    </span>ds_project_init<span class="w"> </span><span class="s2">&quot;analysis_</span><span class="nv">$month</span><span class="s2">&quot;</span><span class="w"> </span>spark

<span class="w">    </span><span class="nb">cd</span><span class="w"> </span><span class="s2">&quot;analysis_</span><span class="nv">$month</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="c1"># Add custom analysis template</span>
<span class="w">    </span>cat<span class="w"> </span>&gt;<span class="w"> </span>notebooks/monthly_report.ipynb<span class="w"> </span><span class="s">&lt;&lt; &#39;EOF&#39;</span>
<span class="s">{</span>
<span class="s">    &quot;cells&quot;: [</span>
<span class="s">        {</span>
<span class="s">            &quot;cell_type&quot;: &quot;code&quot;,</span>
<span class="s">            &quot;source&quot;: [&quot;import pandas as pd\nimport pyspark&quot;]</span>
<span class="s">        }</span>
<span class="s">    ]</span>
<span class="s">}</span>
<span class="s">EOF</span>

<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Monthly analysis project ready: analysis_</span><span class="nv">$month</span><span class="s2">&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p><strong>Unit Tests:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Test: ds_project_init basic project</span>
test_ds_project_init_basic_project<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">test_project</span><span class="o">=</span><span class="s2">&quot;test_ds_basic_</span><span class="nv">$$</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">original_dir</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PWD</span><span class="s2">&quot;</span>

<span class="w">    </span>ds_project_init<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_project</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="c1"># Verify project structure</span>
<span class="w">    </span>assert_true<span class="w"> </span><span class="s2">&quot;[ -d &#39;</span><span class="nv">$test_project</span><span class="s2">&#39; ]&quot;</span><span class="w"> </span><span class="s2">&quot;Project directory should exist&quot;</span>
<span class="w">    </span>assert_true<span class="w"> </span><span class="s2">&quot;[ -f &#39;</span><span class="nv">$test_project</span><span class="s2">/pyproject.toml&#39; ]&quot;</span><span class="w"> </span><span class="s2">&quot;Should have pyproject.toml&quot;</span>
<span class="w">    </span>assert_true<span class="w"> </span><span class="s2">&quot;[ -d &#39;</span><span class="nv">$test_project</span><span class="s2">/notebooks&#39; ]&quot;</span><span class="w"> </span><span class="s2">&quot;Should have notebooks directory&quot;</span>
<span class="w">    </span>assert_true<span class="w"> </span><span class="s2">&quot;[ -d &#39;</span><span class="nv">$test_project</span><span class="s2">/data/raw&#39; ]&quot;</span><span class="w"> </span><span class="s2">&quot;Should have data/raw directory&quot;</span>
<span class="w">    </span>assert_true<span class="w"> </span><span class="s2">&quot;[ -d &#39;</span><span class="nv">$test_project</span><span class="s2">/src&#39; ]&quot;</span><span class="w"> </span><span class="s2">&quot;Should have src directory&quot;</span>
<span class="w">    </span>assert_true<span class="w"> </span><span class="s2">&quot;[ -d &#39;</span><span class="nv">$test_project</span><span class="s2">/tests&#39; ]&quot;</span><span class="w"> </span><span class="s2">&quot;Should have tests directory&quot;</span>

<span class="w">    </span><span class="c1"># Cleanup</span>
<span class="w">    </span><span class="nb">cd</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$original_dir</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_project</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Test: ds_project_init spark project</span>
test_ds_project_init_spark_project<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">test_project</span><span class="o">=</span><span class="s2">&quot;test_ds_spark_</span><span class="nv">$$</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">original_dir</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PWD</span><span class="s2">&quot;</span>

<span class="w">    </span>ds_project_init<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_project</span><span class="s2">&quot;</span><span class="w"> </span>spark

<span class="w">    </span><span class="c1"># Verify Spark dependencies</span>
<span class="w">    </span><span class="nb">cd</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_project</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">deps</span><span class="o">=</span><span class="k">$(</span>uv<span class="w"> </span>pip<span class="w"> </span>list<span class="w"> </span><span class="m">2</span>&gt;/dev/null<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s2">&quot;(pyspark|findspark)&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="k">)</span>
<span class="w">    </span>assert_not_equals<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$deps</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="s2">&quot;Should include Spark dependencies&quot;</span>

<span class="w">    </span><span class="c1"># Cleanup</span>
<span class="w">    </span><span class="nb">cd</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$original_dir</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_project</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Test: ds_project_init without project name</span>
test_ds_project_init_missing_name<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span>output
<span class="w">    </span><span class="nv">output</span><span class="o">=</span><span class="k">$(</span>ds_project_init<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="k">)</span>

<span class="w">    </span>assert_equals<span class="w"> </span><span class="nv">$?</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s2">&quot;Should return error code&quot;</span>
<span class="w">    </span>assert_contains<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$output</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;Usage:&quot;</span><span class="w"> </span><span class="s2">&quot;Should show usage message&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
</section>
</section>
<section id="cross-platform-utilities">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Cross-Platform Utilities</a><a class="headerlink" href="#cross-platform-utilities" title="Link to this heading"></a></h2>
<section id="path-add">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">path_add()</a><a class="headerlink" href="#path-add" title="Link to this heading"></a></h3>
<p><strong>Function Definition:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>path_add<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="c1"># Cross-platform path addition</span>
<span class="w">    </span><span class="c1"># Usage: path_add /path/to/add [before|after]</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">new_path</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">position</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">2</span><span class="k">:-</span><span class="nv">after</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="c1"># Check if path exists and is not already in PATH</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$new_path</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;:</span><span class="nv">$PATH</span><span class="s2">:&quot;</span><span class="w"> </span>!<span class="o">=</span><span class="w"> </span>*<span class="s2">&quot;:</span><span class="nv">$new_path</span><span class="s2">:&quot;</span>*<span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$position</span><span class="s2">&quot;</span><span class="w"> </span><span class="k">in</span>
<span class="w">            </span><span class="s2">&quot;before&quot;</span><span class="o">)</span>
<span class="w">                </span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$new_path</span><span class="s2">:</span><span class="nv">$PATH</span><span class="s2">&quot;</span>
<span class="w">                </span><span class="p">;;</span>
<span class="w">            </span><span class="s2">&quot;after&quot;</span><span class="p">|</span>*<span class="o">)</span>
<span class="w">                </span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PATH</span><span class="s2">:</span><span class="nv">$new_path</span><span class="s2">&quot;</span>
<span class="w">                </span><span class="p">;;</span>
<span class="w">        </span><span class="k">esac</span>
<span class="w">    </span><span class="k">fi</span>
<span class="o">}</span>
</pre></div>
</div>
<p><strong>Examples and Elaboration:</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">path_add</span></code> function safely adds directories to PATH, avoiding duplicates and checking for existence.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add directory to end of PATH</span>
path_add<span class="w"> </span><span class="s2">&quot;/usr/local/bin&quot;</span>

<span class="c1"># Add directory to beginning of PATH (higher priority)</span>
path_add<span class="w"> </span><span class="s2">&quot;/opt/homebrew/bin&quot;</span><span class="w"> </span>before

<span class="c1"># Common development setup</span>
setup_development_path<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span>path_add<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.local/bin&quot;</span>
<span class="w">    </span>path_add<span class="w"> </span><span class="s2">&quot;/opt/homebrew/bin&quot;</span><span class="w"> </span>before
<span class="w">    </span>path_add<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/go/bin&quot;</span>
<span class="w">    </span>path_add<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.cargo/bin&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p><strong>Unit Tests:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Test: path_add adds valid directory</span>
test_path_add_valid_directory<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">original_path</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PATH</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">test_path</span><span class="o">=</span><span class="s2">&quot;/usr/local/bin&quot;</span>

<span class="w">    </span><span class="c1"># Ensure test path exists (create if needed for test)</span>
<span class="w">    </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_path</span><span class="s2">&quot;</span>

<span class="w">    </span>path_add<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_path</span><span class="s2">&quot;</span>

<span class="w">    </span>assert_contains<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$PATH</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$test_path</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;PATH should contain added directory&quot;</span>

<span class="w">    </span><span class="c1"># Restore original PATH</span>
<span class="w">    </span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$original_path</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Test: path_add ignores non-existent directory</span>
test_path_add_nonexistent_directory<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">original_path</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PATH</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">fake_path</span><span class="o">=</span><span class="s2">&quot;/nonexistent/path/12345&quot;</span>

<span class="w">    </span>path_add<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$fake_path</span><span class="s2">&quot;</span>

<span class="w">    </span>assert_not_contains<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$PATH</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$fake_path</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;PATH should not contain non-existent directory&quot;</span>
<span class="w">    </span>assert_equals<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$PATH</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$original_path</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;PATH should be unchanged&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
</section>
</section>
<section id="notes">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Notes</a><a class="headerlink" href="#notes" title="Link to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All functions are designed to be cross-shell compatible, working in both bash and zsh environments.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Unit tests assume certain system conditions. In production environments, consider using mocks for external dependencies like network connectivity and file system operations.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Functions follow the principle of least surprise - they fail gracefully and provide meaningful error messages when possible.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Siege Analytics.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>